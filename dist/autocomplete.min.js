var autoComplete=function(){function t(t){if(document.querySelector){this.options={selector:null,data:[],valueFiled:"valueFiled",displayField:"displayField",placeholder:"Select an option"};for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);var s="object"==typeof this.options.selector?[o.selector]:document.querySelectorAll(this.options.selector);this.element=s[0],this.dropdown=document.createElement("div"),this.dropdown.id="autocomplete"+(new Date).getTime(),this.dropdown.setAttribute("class","autocomplete"),this.dropdown.data=this.options.data;var i=document.createElement("span");i.textContent=this.options.placeholder,this.dropdown.appendChild(i),this.dropdown.dropdowntext=i;var a=document.createElement("div");a.setAttribute("class","arrow"),this.dropdown.appendChild(a),this.element.appendChild(this.dropdown);var n=this;this.dropdown.onclick=function(t){n.show_data(t),t.stopPropagation()},document.onclick=function(t){n.sourceContainer.remove(),n.dropdown.setAttribute("class","autocomplete")},this.show_data=function(t){if(0==function(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}(this.dropdown,"open")){this.dropdown.setAttribute("class","autocomplete open");var e=document.createElement("div");e.id=this.dropdown.id+"source",e.setAttribute("class","autocomplete-container");var o=this.dropdown.offsetTop+this.dropdown.offsetHeight+"px";this.dropdown.offsetWidth;e.setAttribute("style","top:"+o),this.search=document.createElement("input"),this.search.setAttribute("class","search");var s=this;this.search.onkeyup=function(t){s.search_values(t),t.stopPropagation()},this.search.onclick=function(t){t.stopPropagation()},e.appendChild(this.search),this.sourceContainer=e,this.source=document.createElement("ul");for(var i=0;i<this.options.data.length;i++){var a=document.createElement("li");a.setAttribute("data-value",this.options.data[i][this.options.valueFiled]),a.setAttribute("data-display",this.options.data[i][this.options.displayField]),a.textContent=this.options.data[i][this.options.displayField],this.dropdown.dataset.value==this.options.data[i][this.options.valueFiled]&&a.setAttribute("class","active"),a.onclick=function(t){s.selectListValue(t),t.stopPropagation()},this.source.appendChild(a)}e.appendChild(this.source),document.getElementsByTagName("body")[0].appendChild(e),1==this.source.getElementsByClassName("active").length?this.source.getElementsByClassName("active")[0].scrollIntoView():this.search.focus()}else this.sourceContainer.remove(),this.dropdown.setAttribute("class","autocomplete")},this.search_values=function(t){var e=t.target.value,o=this.source.children;if(""!==e){e=e.toLowerCase();for(s=0;s<o.length;s++){-1==o[s].dataset.display.toString().trim().toLowerCase().indexOf(e)?o[s].style.display="none":o[s].style.display="block"}}else for(var s=0;s<o.length;s++)o[s].style.display="block"},this.selectListValue=function(t){var e=t.target.dataset.value,o=t.target.dataset.display;this.dropdown.setAttribute("data-value",e),this.dropdown.setAttribute("data-display",o),this.dropdown.dropdowntext.textContent=o,this.sourceContainer.remove(),this.dropdown.setAttribute("class","autocomplete")},this.destroy=function(){this.removeChild(this.search),this.removeChild(this.source)},this.getValue=function(){return this.dropdown.dataset.value},this.setValue=function(t){for(var e=0;e<this.options.data.length;e++)if(t==this.options.data[e][this.options.valueFiled]){this.dropdown.setAttribute("data-value",this.options.data[e][this.options.valueFiled]),this.dropdown.setAttribute("data-display",this.options.data[e][this.options.displayField]),this.dropdown.dropdowntext.textContent=this.options.data[e][this.options.displayField];break}}}}return t}();"function"==typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!=typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete;