var autoComplete=function(){function e(e){function t(e,t,o){e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener(t,o)}function n(e,t,o){e.detachEvent?e.detachEvent("on"+t,o):e.removeEventListener(t,o)}function a(e,o){if(0==function(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}(o.element,"open")){o.element.setAttribute("class","autocomplete open");var n=document.createElement("div");n.id=o.element.id+"source",n.setAttribute("class","autocomplete-container");var a=o.element.offsetTop+o.element.offsetHeight+"px";n.setAttribute("style","top:"+a),o.search=document.createElement("input"),o.search.setAttribute("class","search");var s=o;t(o.search,"keyup",function(e){!function(e,t){var o=e.target.value,n=t.source.children;if(""!==o){o=o.toLowerCase();for(a=0;a<n.length;a++){-1==n[a].dataset.display.toString().trim().toLowerCase().indexOf(o)?n[a].style.display="none":n[a].style.display="block"}}else for(var a=0;a<n.length;a++)n[a].style.display="block"}(e,s),e.stopPropagation()}),t(o.search,"click",function(e){e.stopPropagation()}),n.appendChild(o.search),o.sourceContainer=n,o.source=document.createElement("ul");for(var l=0;l<o.options.data.length;l++){var r=document.createElement("li");r.setAttribute("data-value",o.options.data[l][o.options.valueFiled]),r.setAttribute("data-display",o.options.data[l][o.options.displayField]),r.textContent=o.options.data[l][o.options.displayField],o.element.dataset.value==o.options.data[l][o.options.valueFiled]&&r.setAttribute("class","active"),t(r,"click",function(e){!function(e,t){var o=e.target.dataset.value,n=e.target.dataset.display;t.element.setAttribute("data-value",o),t.element.setAttribute("data-display",n),t.element.dropdowntext.textContent=n,i(t),null!=t.options.onSelect&&t.options.onSelect(n,o)}(e,s),e.stopPropagation()}),o.source.appendChild(r)}n.appendChild(o.source),document.getElementsByTagName("body")[0].appendChild(n),1==o.source.getElementsByClassName("active").length?o.source.getElementsByClassName("active")[0].scrollIntoView():o.search.focus()}else i(o)}function i(e){for(var t=e.source.children,o=0;o<t.length;o++)n(t[o],"*");n(e.search,"*"),e.sourceContainer.remove(),e.element.setAttribute("class","autocomplete")}if(document.querySelector){this.options={selector:null,data:[],valueFiled:"valueFiled",displayField:"displayField",placeholder:"Select an option",onSelect:null};for(var s in e)e.hasOwnProperty(s)&&(this.options[s]=e[s]);var l=("object"==typeof this.options.selector?[o.selector]:document.querySelectorAll(this.options.selector))[0];this.element=document.createElement("div"),this.element.id="autocomplete"+(new Date).getTime(),this.element.setAttribute("class","autocomplete"),this.element.data=this.options.data;var r=document.createElement("span");r.textContent=this.options.placeholder,this.element.appendChild(r),this.element.dropdowntext=r;var c=document.createElement("div");c.setAttribute("class","arrow"),this.element.appendChild(c),l.appendChild(this.element);var d=this;t(this.element,"click",function(e){a(0,d),e.stopPropagation()}),t(document,"click",function(e){d.sourceContainer.remove(),d.element.setAttribute("class","autocomplete")}),this.destroy=function(){n(this.element,"*"),n(document,"click"),this.removeChild(this.search),this.removeChild(this.source),this.removeChild(this.element)},this.getValue=function(){return this.element.dataset.value},this.setValue=function(e){for(var t=0;t<this.options.data.length;t++)if(e==this.options.data[t][this.options.valueFiled]){this.element.setAttribute("data-value",this.options.data[t][this.options.valueFiled]),this.element.setAttribute("data-display",this.options.data[t][this.options.displayField]),this.element.dropdowntext.textContent=this.options.data[t][this.options.displayField];break}}}}return e}();"function"==typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!=typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete;